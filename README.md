# SPIDER SONG

## Description

- Folder `prepareNHX` cointains R script (`code.R`) to prepare the NHX tree file. It also performs Brownian Motion simulation at nodes. It takes as input handmade chuncks of the original Nexus file provided by Wayne. 

- `SpiderFinal.nhx` is the tree file in NHX format generated by the above-mentionned R script. It is the input file for the `TreeSonif.py` script. Note that the nhx can be loaded in the online tool PhyloCloud (https://phylocloud.cgmlab.org/), be topologically modified and saved back to NHX again. This allows testing different tree representations. 

- `TreeSonif.py` is a python script that transforms an input NHX tree file onto a json file compatible with the sonificatopn modules developed by Mendel, as well as a graphical representation of the tree with a circular layout. 

- `SpiderOutput.json` is an example of the json file produced by `TreeSonif.py`.

- `Tree.svg` is an example of the graphical output produced by `TreeSonif.py`.

## Dependencies
`TreeSonif.py` relies on these python libraries: 

- ete3
- json
- argparse
- sys
- numpy
- math
- svgwrite

They can all be installed with pip by simply typing `pip install library_name`

## Usage

To use `TreeSonif.py`, type: 

```console
./TreeSonif.py -i input_nhx_tree_file -o output_json_file --drawtree --margin 10
```

For example, the json file `SpiderOutput.json` and rthe svg file `tree.svg` present in this repo were obtained from the nhx tree file `SpiderFinal.nhx` by typing: 

```console
./TreeSonif.py -i SpiderFinal.nhx -o SpiderOutput.json --drawtree --margin 10
```


To get help, type `TreeSonif.py -h`. To know the version of the script type `TreeSonif.py -v`.


## TODO Checklist

- [x] Branch length associated to parent node
- [x] NeoY associated to parent node
- [x] Put in one place (function) all the features that are (or not) to be included in the json
- [ ] Add verbosity for people to know what happens when script is running
- [ ] Make the script general (1): choose what features to include (through option)
- [ ] Make the script general (2): choose what features to assign to parental nodes (through option)
- [ ] ... 


